<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>jQuery Idle Timeout</title>

<style type="text/css">
html, body { margin:0; padding:0; }
#content { padding:10px; }
</style>

<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/base/jquery-ui.css" type="text/css" rel="stylesheet" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js" type="text/javascript"></script>
<script src="src/jquery.idletimer.js" type="text/javascript"></script>
<script src="src/jquery.idletimeout.js" type="text/javascript"></script>

<script type="text/javascript">

$(function(){
	$("#dialog").dialog({
		autoOpen: false,
		modal: true,
		buttons: {
			'Yes, Keep Working': function(){
				$(this).dialog('close');
			}
		}
	});
	
	$.idleTimeout('#dialog', 'div.ui-dialog-buttonpane button', {
		idleAfter: 5,
		pollingInterval: 1,
		keepAliveURL: 'keepalive.php',
		serverResponseEquals: 'OK',
		onTimeout: function(){
			window.location = "timeout.htm";
		},
		onIdle: function(){
			$(this).dialog("open");
			console.log( $(this), $("div.ui-dialog-buttonpane button") );
		},
		onCountdown: function(counter){
			$("#dialog-countdown").html(counter); // update the counter
		},
		onResume: function(){
			// we don't need to do anything here - the button auto closes the dialog.
		}
	});
});
</script>
</head>

<body>

<div id="dialog">
	<p>
		<span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
		You will be logged off in <span id="dialog-countdown"></span> seconds.  Do you want to continue your session?
	</p>
</div>

<div id="content">
<h2>jQuery Idle Timeout</h2>
<p>This idle timeout countdown is triggered after 5 seconds.  Keep your mouse and keyboard still!</p>
<p>A polling request is sent to the server every second to keep the server side session alive.  I've set it to one second 
for demo purposes (timeout is only 5 seconds), but in reality, this should be much higher.</p>
<p>View source to see markup &amp; CSS.</p>
<a href="http://www.erichynds.com/blog/?p=66">&laquo; Return to Blog Post</a>
</div>


</body>
</html>

